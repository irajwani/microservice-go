aws --endpoint-url http://localhost:4566 s3 cp ../README.md s3://my-test-bucket/new.txt


aws --region eu-central-1 --endpoint-url http://localhost:4566 lambda invoke \
  --function-name hello_go_lambda \
  /dev/stdout

psql -U postgres -d jobsdb -c "SELECT * FROM conversion_jobs ORDER BY created_at DESC;"
psql -U postgres -d jobsdb -c "\\d accounts"

#Â Seed
psql -U postgres -d jobsdb -c "INSERT INTO accounts (user_id,currency,balance) VALUES ('c1','USD',5000) ON CONFLICT (user_id,currency) DO UPDATE SET balance=EXCLUDED.balance;" 
psql -U postgres -d jobsdb -c "INSERT INTO accounts (user_id,currency,balance) VALUES ('c1','EUR',0) ON CONFLICT (user_id,currency) DO NOTHING;"

# Verify exchange occured
psql -U postgres -d jobsdb -c "SELECT * FROM ledger_entries ORDER BY created_at DESC LIMIT 10;"
psql -U postgres -d jobsdb -c "SELECT entry_type, currency, amount FROM ledger_entries ORDER BY created_at DESC LIMIT 10;"
psql -U postgres -d jobsdb -c "SELECT user_id, currency, balance FROM accounts ORDER BY user_id, currency;"

# Perform exchange
curl -s -X POST "$(terraform output -raw jobs_api_invoke_url)" \
  -H 'Content-Type: application/json' \
  -d '{"client_id":"c1","source_currency":"USD","target_currency":"EUR","source_amount":100}'

# Get balances for user
curl -s "http://localhost:4566/restapis/9ii3xkzxlm/dev/_user_request_/balances?user_id=c1" | jq .

# Get transactions for user
curl -s "http://localhost:4566/restapis/0umfqqrrrc/dev/_user_request_/jobs?user_id=c1&limit=10" | jq .


